"use strict";function photoLineFilter(a,b,c){if(!b)return a;var d=c.filter(function(a){return-1!==a.lineIds.indexOf(b)}).map(function(a){return a.id});return a.filter(function(a){return a.stationIds.some(function(a){return-1!==d.indexOf(a)})})}function byIds(a,b){return a.filter(function(a){return-1!==b.indexOf(a.id)})}function photoQueryFilter(a,b){if(!b)return a;var c=new RegExp("\\b"+b,"i");return a.filter(function(a){return a.name.match(c)?!0:a.description.match(c)?!0:!1})}angular.module("app",["ngResource","ngRoute"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/photos.html",controller:"PhotosCtrl"}).otherwise({redirectTo:"/"})}]),angular.module("app").controller("PhotosCtrl",["$scope","$filter","Line","Photo","Station",function(a,b,c,d,e){a.query="",a.line=null,a.stations=e.all(),a.lines=c.all(),a.photos=d.all(),a.$watchCollection("[line, query]",function(c){var d=c[0],e=c[1];a.filteredPhotos=b("photoQueryFilter")(a.photos,e),a.filteredPhotos=b("photoLineFilter")(a.filteredPhotos,d,a.stations)}),a.filterByLine=function(b){a.line=b}}]),angular.module("app").controller("FooterCtrl",["$scope",function(a){a.year=(new Date).getFullYear(),a.links=[{name:"facebook",url:"https://www.facebook.com/murphyz"},{name:"twitter",url:"https://twitter.com/murphyz"},{name:"tumblr",url:"http://murphyz.tumblr.com"},{name:"instagram",url:"https://instagram.com/murphyz"},{name:"flickr",url:"https://www.flickr.com/murphyzmike"},{name:"googleplus",url:"https://plus.google.com/+MichaelMurphy"}]}]),angular.module("app").filter("photoLineFilter",function(){return photoLineFilter}),angular.module("app").filter("byIds",function(){return byIds}),angular.module("app").directive("googleMap",function(){return{restrict:"AE",template:"<div></div>",replace:!0,link:function(a,b){function c(a){var b=new google.maps.LatLng(a.lat,a.lng),c=new google.maps.Marker({position:b,map:f});i.push(c)}function d(){i.forEach(function(a){a.setMap(null)}),i=[]}var e,f,g,h,i;g=51.5072,h=-.1275,e={zoom:13,center:new google.maps.LatLng(g,h)},i=[],f=new google.maps.Map(b[0],e),a.$watch("filteredPhotos",function(a){a&&(d(),a.forEach(function(a){c(a)}))},!0)}}}),angular.module("app").factory("Photo",["$resource",function(a){return a("/json/photos.json",{},{all:{method:"GET",isArray:!0}})}]),angular.module("app").factory("Station",["$resource",function(a){return a("/json/stations.json",{},{all:{method:"GET",isArray:!0}})}]),angular.module("app").factory("Line",["$resource",function(a){return a("/json/lines.json",{},{all:{method:"GET",isArray:!0}})}]),angular.module("app").filter("photoQueryFilter",function(){return photoQueryFilter});